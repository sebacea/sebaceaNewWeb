<script>
    document.addEventListener("DOMContentLoaded", function () {
        if (!/posts/.test(location.pathname)) {
            return;
        }

        var script = document.createElement("script");
        script.src = "https://giscus.app/client.js";
        script.setAttribute("data-repo", "sidhuk/karat_codes");
        script.setAttribute("data-repo-id", "R_kgDOHXqv2g");
        script.setAttribute("data-category", "General");
        script.setAttribute("data-category-id", "DIC_kwDOHXqv2s4CPOLC");
        script.setAttribute("data-mapping", "pathname");
        script.setAttribute("data-reactions-enabled", "1");
        script.setAttribute("data-emit-metadata", "0");
        script.setAttribute("data-input-position", "bottom");
        script.setAttribute("data-theme", "light_protanopia");
        script.setAttribute("data-lang", "en");
        script.setAttribute("crossorigin", "anonymous");

        /* wait for article to load, append script to article element */
        var observer = new MutationObserver(function (mutations, observer) {
            var article = document.querySelector("d-article");
            if (article) {
                observer.disconnect();
                /* HACK: article scroll */
                article.setAttribute("style", "overflow-y: hidden");
                article.appendChild(script);
            }
        });

        observer.observe(document.body, {
            childList: true
        });
    });
</script>